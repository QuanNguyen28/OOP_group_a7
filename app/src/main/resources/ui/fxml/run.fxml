<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="app.controller.RunController"
            styleClass="page"
            style="-fx-background-color: #f5f5f5;">

    <!-- Content Wrapper - Centered Card -->
    <center>
        <VBox alignment="TOP_CENTER" style="-fx-background-color: #f5f5f5; -fx-padding: 40 0;">
            
            <!-- Main Card Container -->
            <VBox spacing="0" style="-fx-background-color: white; -fx-background-radius: 24; -fx-effect: dropshadow(gaussian, rgba(0, 0, 0, 0.08), 24, 0, 0, 8); -fx-max-width: 850; -fx-min-width: 850;">
                
                <!-- Header Section with Icon -->
                <VBox spacing="16" alignment="CENTER" style="-fx-padding: 56 40 40 40;">
                    <Label text="ðŸŒ" style="-fx-font-size: 64px;"/>
                    <Label text="PhÃ¢n TÃ­ch Tháº£m Há»a" style="-fx-font-size: 32px; -fx-font-weight: 700; -fx-text-fill: #047857;"/>
                    <Label text="Humanitarian Analytics Powered by AI" style="-fx-font-size: 13px; -fx-text-fill: #6b7280;"/>
                </VBox>
                
                <!-- Form Content -->
                <VBox spacing="20" style="-fx-padding: 0 48 48 48;">
                    
                    <!-- Search Input -->
                    <VBox spacing="10">
                        <HBox spacing="8" alignment="CENTER_LEFT">
                            <Label text="ðŸ”" style="-fx-font-size: 16px;"/>
                            <Label text="Tá»« KhÃ³a TÃ¬m Kiáº¿m" style="-fx-font-size: 13px; -fx-font-weight: 600; -fx-text-fill: #374151;"/>
                        </HBox>
                        <TextField fx:id="keywordField"
                                   promptText=""
                                   prefHeight="48"
                                   style="-fx-font-size: 14px; -fx-padding: 12 16; -fx-background-color: white; -fx-background-radius: 10; -fx-border-radius: 10; -fx-border-width: 1.5; -fx-border-color: #d1d5db;"/>
                        <Label text="ðŸ’¡ Há»‡ thá»‘ng tá»± Ä‘á»™ng má»Ÿ rá»™ng tá»« khÃ³a vá»›i cÃ¡c biáº¿n thá»ƒ (#hashtag, 'bÃ£o...', v.v.)" 
                               style="-fx-font-size: 11px; -fx-text-fill: #9ca3af; -fx-padding: 4 0 0 0;"/>
                    </VBox>
                    
                    <!-- Date Range Section -->
                    <HBox spacing="20" alignment="CENTER">
                        <!-- From Date -->
                        <VBox spacing="10" HBox.hgrow="ALWAYS">
                            <HBox spacing="6" alignment="CENTER_LEFT">
                                <Label text="ðŸ“…" style="-fx-font-size: 14px;"/>
                                <Label text="Tá»« NgÃ y" style="-fx-font-size: 13px; -fx-font-weight: 600; -fx-text-fill: #374151;"/>
                            </HBox>
                            <DatePicker fx:id="fromDate" 
                                        promptText="yyyy-MM-dd"
                                        prefHeight="48"
                                        maxWidth="Infinity"
                                        style="-fx-font-size: 13px; -fx-padding: 12 14; -fx-background-color: white; -fx-background-radius: 10; -fx-border-radius: 10; -fx-border-width: 1.5; -fx-border-color: #d1d5db;"/>
                        </VBox>
                        
                        <!-- Arrow -->
                        <Label text="â†’" style="-fx-font-size: 20px; -fx-text-fill: #d1d5db; -fx-padding: 28 0 0 0;"/>
                        
                        <!-- To Date -->
                        <VBox spacing="10" HBox.hgrow="ALWAYS">
                            <HBox spacing="6" alignment="CENTER_LEFT">
                                <Label text="ðŸ“…" style="-fx-font-size: 14px;"/>
                                <Label text="Äáº¿n NgÃ y" style="-fx-font-size: 13px; -fx-font-weight: 600; -fx-text-fill: #374151;"/>
                            </HBox>
                            <DatePicker fx:id="toDate" 
                                        promptText="yyyy-MM-dd"
                                        prefHeight="48"
                                        maxWidth="Infinity"
                                        style="-fx-font-size: 13px; -fx-padding: 12 14; -fx-background-color: white; -fx-background-radius: 10; -fx-border-radius: 10; -fx-border-width: 1.5; -fx-border-color: #d1d5db;"/>
                        </VBox>
                    </HBox>
                    
                    <!-- Action Buttons - 3 Columns -->
                    <HBox spacing="12" style="-fx-padding: 16 0 0 0;">
                        <!-- Primary Button - Run Analysis -->
                        <Button fx:id="runBtn" 
                                text="â–¶ Cháº¡y PhÃ¢n TÃ­ch" 
                                onAction="#onRunIngest"
                                prefHeight="52"
                                maxWidth="Infinity"
                                HBox.hgrow="ALWAYS"
                                style="-fx-font-size: 14px; -fx-font-weight: 700; -fx-background-radius: 12; -fx-background-color: #10b981; -fx-text-fill: white; -fx-border-width: 0; -fx-effect: dropshadow(gaussian, rgba(16, 185, 129, 0.3), 12, 0, 0, 4); -fx-cursor: hand;">
                            <tooltip><Tooltip text="Náº¡p vÃ  phÃ¢n tÃ­ch dá»¯ liá»‡u theo tá»« khÃ³a vÃ  khoáº£ng thá»i gian"/></tooltip>
                        </Button>
                        
                        <!-- Dashboard Button -->
                        <Button text="ðŸ“Š Báº£ng Äiá»u Khiá»ƒn" 
                                onAction="#onOpenLastDashboard"
                                prefHeight="52"
                                maxWidth="Infinity"
                                HBox.hgrow="ALWAYS"
                                style="-fx-font-size: 13px; -fx-font-weight: 600; -fx-background-radius: 12; -fx-background-color: #d1fae5; -fx-text-fill: #047857; -fx-border-width: 0; -fx-cursor: hand;">
                            <tooltip><Tooltip text="Xem dashboard phÃ¢n tÃ­ch gáº§n nháº¥t"/></tooltip>
                        </Button>
                        
                        <!-- Collector Button -->
                        <Button text="ðŸ”„ Thu Tháº­p Dá»¯ Liá»‡u" 
                                onAction="#onOpenCollector"
                                prefHeight="52"
                                maxWidth="Infinity"
                                HBox.hgrow="ALWAYS"
                                style="-fx-font-size: 13px; -fx-font-weight: 600; -fx-background-radius: 12; -fx-background-color: #d1fae5; -fx-text-fill: #047857; -fx-border-width: 0; -fx-cursor: hand;">
                            <tooltip><Tooltip text="Thu tháº­p dá»¯ liá»‡u má»›i tá»« News RSS, YouTube, Reddit"/></tooltip>
                        </Button>
                    </HBox>
                    
                </VBox>
            </VBox>
            
            <!-- Status Section Below Card -->
            <VBox spacing="32" alignment="CENTER" style="-fx-padding: 40 0 20 0;">
                <!-- Status Message -->
                <VBox spacing="8" alignment="CENTER">
                    <Label fx:id="statusLabel" 
                           text="âœ¨ Sáºµn sÃ ng phÃ¢n tÃ­ch" 
                           style="-fx-font-size: 16px; -fx-font-weight: 600; -fx-text-fill: #047857;"/>
                    <Label text="Nháº­p tá»« khÃ³a vÃ  chá»n khoáº£ng thá»i gian Ä‘á»ƒ báº¯t Ä‘áº§u phÃ¢n tÃ­ch" 
                           style="-fx-font-size: 12px; -fx-text-fill: #6b7280;"/>
                </VBox>
                
                <!-- Database Info -->
                <HBox spacing="8" alignment="CENTER" style="-fx-opacity: 0.6;">
                    <Label text="ðŸ’¾" style="-fx-font-size: 12px;"/>
                    <Label fx:id="dbLabel" text="Database: ..." style="-fx-font-size: 11px; -fx-text-fill: #6b7280;"/>
                </HBox>
            </VBox>
            
        </VBox>
    </center>

</BorderPane>